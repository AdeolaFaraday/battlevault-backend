enum GameType {
  TOURNAMENT
  FREE
  INSTANT_COMPETITIVE
}

enum LudoStatus {
  waiting
  playingDice
  playingToken
  finished
}

enum LudoColor {
  blue
  yellow
  green
  red
}

type Token {
  sn: Int!
  color: LudoColor!
  active: Boolean
  position: Int
  isSafePath: Boolean
  isFinished: Boolean
}

type TokenMap {
  blue: [Token!]!
  yellow: [Token!]!
  green: [Token!]!
  red: [Token!]!
}

type LudoPlayer {
  id: ID!
  name: String!
  avatarUrl: String
  color: LudoColor!
  tokens: [LudoColor!]!
  capturedCount: Int
  finishedCount: Int
}

type LudoGameState {
  _id: ID!
  name: String!
  type: GameType!
  players: [LudoPlayer!]!
  currentTurn: String! # Player ID
  diceValue: [Int!]!
  isRolling: Boolean
  status: LudoStatus!
  winner: String
  tokens: TokenMap
  usedDiceValues: [Int!]!
  activeDiceConfig: [Int!]
  lastMoverId: String
  startDate: String
  createdAt: String
  updatedAt: String
}

input MoveInput {
  tokenId: Int!
  color: LudoColor!
}

input LudoPlayerInput {
  id: String
  name: String!
  color: LudoColor!
  avatarUrl: String
}

input CreateGameInput {
  name: String!
  type: GameType!
  tournamentId: String
  matchStage: String
  startDate: String
  players: [LudoPlayerInput!]
}

extend type Query {
  getGame(id: ID!): Response
  getUpcomingGames: Response!
  getActiveGames: Response!
}

extend type Mutation {
  createGame(input: CreateGameInput): Response
  createFreeGame(name: String!): Response!
  rollDice(gameId: ID!, name: String): Response!
  processMove(gameId: ID!, input: MoveInput!, name: String): Response!
  joinGame(gameId: ID!, userId: ID, name: String!): Response!
  selectDice(gameId: ID!, diceValues: [Int!]!, name: String): Response!
}
