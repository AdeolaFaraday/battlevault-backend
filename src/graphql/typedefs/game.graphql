enum GameType {
  TOURNAMENT
  FREE
  INSTANT_COMPETITIVE
}

enum LudoStatus {
  waiting
  playingDice
  playingToken
  finished
}

enum LudoColor {
  blue
  yellow
  green
  red
}

type Token {
  sn: Int!
  color: LudoColor!
  active: Boolean
  position: Int
  isSafePath: Boolean
  isFinished: Boolean
}

type TokenMap {
  blue: [Token!]!
  yellow: [Token!]!
  green: [Token!]!
  red: [Token!]!
}

type LudoPlayer {
  id: ID!
  name: String!
  avatarUrl: String
  color: LudoColor!
  tokens: [LudoColor!]!
  capturedCount: Int
  finishedCount: Int
}

type LudoGameState {
  id: ID!
  name: String!
  type: GameType!
  players: [LudoPlayer!]!
  currentTurn: String! # Player ID
  diceValue: [Int!]!
  isRolling: Boolean
  status: LudoStatus!
  winner: String
  tokens: TokenMap!
  usedDiceValues: [Int!]!
  activeDiceConfig: [Int!]
  lastMoverId: String
  startDate: String
  createdAt: String
  updatedAt: String
}

input MoveInput {
  tokenId: Int!
  color: LudoColor!
}

input LudoPlayerInput {
  id: String
  name: String!
  color: LudoColor!
  avatarUrl: String
}

input CreateGameInput {
  name: String!
  type: GameType!
  tournamentId: String
  matchStage: String
  startDate: String
  players: [LudoPlayerInput!]
}

extend type Query {
  getGame(id: ID!): LudoGameState
  getUpcomingGames: [LudoGameState!]!
  getActiveGames: [LudoGameState!]!
}

extend type Mutation {
  createGame(input: CreateGameInput): LudoGameState
  createFreeGame(name: String!): LudoGameState!
  rollDice(gameId: ID!): LudoGameState!
  processMove(gameId: ID!, input: MoveInput!): LudoGameState!
  joinGame(gameId: ID!, userId: ID, name: String!): LudoGameState!
  selectDice(gameId: ID!, diceValues: [Int!]!): LudoGameState!
}
