enum TournamentStatus {
  UPCOMING
  ONGOING
  COMPLETED
  CANCELLED
}

enum TournamentFrequency {
  DAILY
  WEEKLY
  MONTHLY
  ONE_TIME
}

type Money {
  amount: Float!
  currency: String!
}

type Tournament {
  _id: ID!
  title: String!
  description: String
  gameType: String!
  entryFee: Money
  prize: Money!
  status: TournamentStatus!
  frequency: TournamentFrequency!
  isPrivate: Boolean!
  minRating: Int
  registeredUsers: [User]
  maxUsers: Int!
  winner: User
  startDate: String!
  endDate: String
  createdAt: String
  updatedAt: String
}

type TournamentBracket {
  tournament: Tournament
  stages: [TournamentStage]
}

type TournamentRegistration {
  isRegistered: Boolean!
}

input MoneyInput {
  amount: Float!
  currency: String
}

input CreateTournamentInput {
  title: String!
  description: String
  gameType: String!
  entryFee: MoneyInput
  prize: MoneyInput!
  frequency: TournamentFrequency
  isPrivate: Boolean
  password: String
  minRating: Int
  maxUsers: Int!
  startDate: String!
  endDate: String
}

type TournamentStage {
  _id: ID!
  tournamentId: ID!
  name: String!
  index: Int!
  gameIds: [String]
  status: String!
  games: [LudoGameState] # Use [Game] or [JSON] if Game type is not fully exposed here. Usually Game is in game.graphql.
}

extend type Query {
  getTournaments: Response
  getTournament(id: ID!): Response
  getTournamentBracket(tournamentId: ID!): Response
  isUserRegistered(tournamentId: ID!): Response
}

extend type Mutation {
  createTournament(input: CreateTournamentInput!): Response
  registerForTournament(tournamentId: ID!, password: String): Response
  startTournament(tournamentId: ID!): Response
}
